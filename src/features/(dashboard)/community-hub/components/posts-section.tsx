"use client";

import { useState } from "react";
import { Button } from "@/src/components/ui/button";
import { Input } from "@/src/components/ui/input";
import { Post } from "../types";
import { PostItem } from "./post-item";
import { Textarea } from "@/src/components/ui/textarea";

interface PostsSectionProps {
  posts: Post[];
}

export function PostsSection({ posts }: PostsSectionProps) {
  const [newPost, setNewPost] = useState("");

  const handleSubmitPost = () => {
    if (newPost.trim()) {
      // Handle post submission logic here
      setNewPost("");
    }
  };

  return (
    <div className="rounded-xl bg-white py-2">
      <h1 className="mb-8 text-2xl font-semibold text-gray-900">
        Community Hub
      </h1>

      {/* Posts Section */}
      <div className="space-y-8 md:px-8">
        {posts.map((post) => (
          <PostItem key={post.id} post={post} />
        ))}

        {/* Main post input */}
        <div className="flex space-x-3 pt-6">
          <div className="relative w-full">
            <Textarea
              placeholder="Start your conversation"
              value={newPost}
              onChange={(e) => setNewPost(e.target.value)}
              className="flex-1 rounded-[24px] border-gray-200 bg-white px-6 py-4 text-sm placeholder:text-sm placeholder:text-[#9F9F9F] focus:bg-white"
            />

            <button className="absolute bottom-6 left-8">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="19"
                height="21"
                viewBox="0 0 19 21"
                fill="none"
              >
                <path
                  d="M14.1265 0.296875C14.6127 0.297004 15.0943 0.392981 15.5435 0.579102C15.9927 0.76533 16.4018 1.03787 16.7456 1.38184C17.0894 1.72578 17.3614 2.13468 17.5474 2.58398C17.7333 3.03324 17.8297 3.51477 17.8296 4.00098C17.8295 4.48733 17.7336 4.96966 17.5474 5.41895C17.3613 5.86783 17.0882 6.27553 16.7446 6.61914L16.729 6.63379V6.63477L7.74756 15.2803C7.64552 15.3784 7.52488 15.4552 7.39307 15.5068C7.26126 15.5585 7.12053 15.5838 6.979 15.5811C6.83748 15.5783 6.69757 15.5479 6.56787 15.4912C6.43817 15.4345 6.32129 15.352 6.22314 15.25C6.12498 15.1479 6.04724 15.0274 5.99561 14.8955C5.94409 14.7638 5.91864 14.6229 5.92139 14.4814C5.92418 14.3401 5.9556 14.2009 6.01221 14.0713C6.06893 13.9415 6.15038 13.8237 6.25244 13.7256L15.2251 5.08984L15.2261 5.08887C15.5153 4.79784 15.6766 4.40347 15.6753 3.99316C15.674 3.58291 15.5102 3.18959 15.2192 2.90039C15.0752 2.7573 14.9041 2.64452 14.7163 2.56738C14.5284 2.49022 14.3267 2.45054 14.1235 2.45117C13.7135 2.4525 13.3209 2.61651 13.0317 2.90723L3.82861 12.082C3.18707 12.7239 2.8265 13.5944 2.82666 14.502C2.82675 14.9513 2.91539 15.3964 3.0874 15.8115C3.25946 16.2267 3.51177 16.6042 3.82959 16.9219C4.14734 17.2395 4.52485 17.4912 4.93994 17.6631C5.3552 17.835 5.80105 17.9239 6.25049 17.9238C7.15791 17.9235 8.02786 17.5626 8.66943 16.9209L16.3628 9.2334C16.4631 9.1331 16.5823 9.0533 16.7134 8.99902C16.8443 8.9448 16.9847 8.91702 17.1265 8.91699C17.2681 8.91699 17.4086 8.94488 17.5396 8.99902C17.6705 9.05327 17.7899 9.13317 17.8901 9.2334C17.9904 9.33369 18.0702 9.45294 18.1245 9.58398C18.1787 9.71496 18.2065 9.85531 18.2065 9.99707C18.2065 10.1388 18.1787 10.2792 18.1245 10.4102C18.0716 10.5378 17.9936 10.6533 17.897 10.752L17.896 10.7529L17.8862 10.7617L10.1938 18.4492C9.14745 19.4952 7.7281 20.0832 6.24854 20.083C4.7691 20.0827 3.35023 19.4944 2.3042 18.4482C1.25818 17.4019 0.670204 15.9825 0.67041 14.5029C0.670672 13.0234 1.25888 11.6046 2.30518 10.5586L11.5073 1.38086C12.202 0.686555 13.1443 0.296685 14.1265 0.296875Z"
                  fill="#585858"
                  stroke="#585858"
                  strokeWidth="0.09375"
                />
              </svg>
            </button>
            <button className="absolute right-8 bottom-6">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="23"
                viewBox="0 0 24 23"
                fill="none"
              >
                <path
                  d="M16.8301 0.454848L6.29514 3.95485C-0.78653 6.32318 -0.78653 10.1848 6.29514 12.5415L9.4218 13.5798L10.4601 16.7065C12.8168 23.7882 16.6901 23.7882 19.0468 16.7065L22.5585 6.18318C24.1218 1.45818 21.5551 -1.12015 16.8301 0.454848ZM17.2035 6.73151L12.7701 11.1882C12.5951 11.3632 12.3735 11.4448 12.1518 11.4448C11.9301 11.4448 11.7085 11.3632 11.5335 11.1882C11.1951 10.8498 11.1951 10.2898 11.5335 9.95152L15.9668 5.49485C16.3051 5.15652 16.8651 5.15652 17.2035 5.49485C17.5418 5.83318 17.5418 6.39318 17.2035 6.73151Z"
                  fill="#585858"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  );
}
